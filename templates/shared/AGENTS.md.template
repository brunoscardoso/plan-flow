# Plan-Flow: Structured AI-Assisted Development

## Quick Start

| Command | Purpose |
|---------|---------|
| `/setup` | Analyze project and generate pattern files |
| `/discovery-plan` | Create discovery document for requirements gathering |
| `/create-plan` | Create implementation plan with phases and complexity scores |
| `/execute-plan` | Execute plan phases with verification |
| `/create-contract` | Create integration contract from API docs |
| `/review-code` | Review local uncommitted changes |
| `/review-pr` | Review a Pull Request |
| `/write-tests` | Write tests to achieve coverage target |
| `/flow` | Toggle autopilot mode (auto-chains discovery → plan → execute → review) |

## Recommended Workflow

1. `/setup` - Run once to index project patterns
2. `/discovery-plan` - Gather requirements for a new feature
3. `/create-plan` - Create structured implementation plan
4. `/execute-plan` - Execute the plan phase by phase
5. `/review-code` or `/review-pr` - Review changes before merging

## Project Ledger

The Project Ledger (`flow/ledger.md`) is always active. It silently captures project-specific learnings, mistakes, and corrections across sessions - building institutional memory that improves AI assistance over time.

## Critical Rules

1. **No Auto-Chaining**: Never auto-invoke the next command. Wait for user. **Exception**: When autopilot mode is ON (`flow/.autopilot` exists), commands auto-chain per the autopilot flow skill.
2. **Discovery First**: Recommend `/discovery-plan` before `/create-plan` for new features.
3. **Tests Last**: Tests are always the last phase of any implementation plan.
4. **Build at End Only**: Run `npm run build` only after ALL phases complete.

## Flow Directory Structure

```
flow/
├── archive/           # Completed/abandoned plans
├── contracts/         # Integration contracts
├── discovery/         # Discovery documents
├── plans/             # Active implementation plans
├── references/        # Reference materials
├── reviewed-code/     # Code review documents
├── reviewed-pr/       # PR review documents
└── ledger.md          # Persistent project learning journal
```

## Complexity Scoring

Every plan phase has a complexity score (0-10):

| Score | Level | Description |
|-------|-------|-------------|
| 0-2 | Trivial | Simple, mechanical changes |
| 3-4 | Low | Straightforward implementation |
| 5-6 | Medium | Moderate complexity, some decisions |
| 7-8 | High | Complex, multiple considerations |
| 9-10 | Very High | Significant complexity/risk |

## Skills

Plan-flow skills are in `.agents/skills/plan-flow/`:
- Each skill has a `SKILL.md` with frontmatter and instructions
- Use the skill names as slash commands
